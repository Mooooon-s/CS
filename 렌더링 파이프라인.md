# 렌더링 파이프라인
    3차원으로 만들어진 모델을 2차원에 투영하는 렌더링 과정의 프로세스를 자세하게 표현한것

## Input Assembler
CPU로 부터 렌더링을 수행할 도형의 정점 정보를 정점 버퍼에 담아 전달 받음

## Vertex Shader
이전 단계에서 받은 정점들의 정보로 도형을 생성

도형을 생성되었지만 공간 좌표계로 변할 필요가 있음

로컬(L) -> 월드(World) -> 카메라(View) -> 클립(Clip) -> NDC 순으로 변환을 거쳐야함

공간 변환은 행렬 연산을 통해 이루어짐 M, V, P는 각각의 변환 행렬

1. M
    - 자신의 피벗 위치를 원점으로 한느 좌표공간 ( Local Space )

    - 게임 내 월드의 원점을 피벗 위치로 하는 좌표공간
    - TRS 행렬
        - 이동 ( Translate ) 회전  ( Rotate ) 크기 ( Scale ) 변환이 이루어짐
        - 행렬은 이름과 반대로 S * R * T 순서로 이루어져있음
2. V
    - 월드 공간 -> 카메라 공간으로 변환
    - 카메라 공간은 카메라의 위치가 원점이고 카메라가 바라보는 방향이 z축인 공간을 의미
    - 오브젝트를 화면에 그려내기 쉽도록 카메라를 기준으로 공간을 변환하는 과정

3. P
    - 카메라 -> 클립
    - 카메라 기준의 정점 위치를 화면에 보이기 위한 정점 위치로 변환
    - 프러스텀 ( 절두체 )가 정의 됨
        - 컬링 : 절두체를 벗어나는 모든 폴리곤을 버림 경계선에 있으면 일단 유지 
        
        - 클리핑 : NDC에 의행 정투체 영역에 걸쳐있는 부분을 제거
        
        - 클립 공간 : 컬링 클리핑을 통해 메쉬들을 잘라내어 최종적으로 카메라 시야에 보이는 메쉬들만 위치한 공간
            - 클립 공간의 모든 x,y좌표는 -1 ~ 1 사이임 Z는 0 ~ 1 (OpenGL은 -1 ~ 1)

        - 직교 투영 : 원근감이 없음

        - 원근 투영 : 원근감이 있음

> NDC : 정규 좌표로 원점이 화면 정중앙 해상도에 따른 화면 좌표 계산이 단순화됨

## Tesselation ( 생략 가능 )
모델의 정점을 더 잘게 쪼개어 디테일하게 표현할 때 사용한다.

가까운 거리의 물체는 고해상도로 표현 멀리있는 물체는 저해상도로 표현

LOD ( Level of detail )라는 기술이 있음
- 카메라와의 거리에 따라 디테일의 정도를 조절하는 기술

## Geometry Shader ( 생략 가능 )
기본 도형에서 정점을 추가하거나 삭제하여 모델을 변경할 수 있는 셰이더

정점 정보를 추가할 수 있다는 것은 버퍼에 저장할 정점을 줄일 수 있다는 것을 뜻함

## Rasterization
정점 정보를 완전히 결정한 3D도형을 실제 픽셀 데이터로 변환해주는 단계
정점 사이의 공간을 보간해서 매웨줌

1. 뷰포트 변환
    - 3차원의 NDC공간 상의 좌표를 2D 스크린 좌표로 변환
    - -1 ~ 1 범위를 화면 해상도 범위로 변환 ( 좌측 상단이나 좌측 하단이 0,0 원점이 되도록 변경 )
2. 스캔 변환
    프래그먼트를 채우는 픽셀들을 찾아냄
    - 정점 데이터를 보간을 통해서 채우게 됨


## Fragment Shader ( Pixel Shader )
래스터화된 도형에 텍스쳐 매핑 범프 매핑, 노말 매핑 등의 기법으로 텍스쳐를 입혀 색을 표현

정점의 법선 벡터 정보를 통해 조명처리도 해당 셰이더에서 이루어짐

## Oupt Merge
렌더링 파이프라인의 마지막 단계

알파 값과 깊이 값 등을 통해 픽셀끼리 경쟁하여 색을 정하거나 합쳐 최종적으로 화면에 그려질 픽셀을 정함