# 메모리의 구조
    운영체제 에서는 프로그램을 돌리기 위해 적절한 메모리에 할당해줌

## 메모리의 대표적인 구조
메모리는 낮은 주소에서 높은 주소 순으로 메모리 영역이 나눠진다

***코드 영역 -> 데이터 영역 -> 힙 영역 -> 스택영역***

### 코드 영역
- 실행할 프로그램의 코드가 저장되는 영역
- CPU는 이 영역에서 필요한 명령어를 가져다가 처리
- 함수, 제어문 , 상수가 저장됨

### 데이터 영역
- 프로그램의 전역 변수와 정적변수가 저장된느 영역
- 데이터 영역은 프로그램의 시작과 함께 할당되며 프로그램이 종료되면 소멸됨

### 스택영역
- 함수의 호출과 관계되는 지역변수와 매개변수가 저장되는 영역
- 함수의 호출과 함께 할당되고 함수의 호출이 완료되면 소멸함
- 스택영역은 말 그대로 스택의 특성 (LIFO)를 가지고있음
- 높은 주소에서 낮은 주소 순으로 메모리가 할당됨
- 컴파일 단계에서 크기가 결정됨

### 힙 영역
- 사용자가 직접 관리할 수 있고 관리 해야만하는 영역
- 사용자에의해 동적으로 할당되고 해제됨
- 낮은 주소에서 높은 주소 방향으로 할당됨
- 런타임에 크기가 결정됨 ( 가변적임 )


### 영역침범
- 스택과 힙은 같은 영역을 공유하고있기 때문에 상대 공간을 침범하는 일이 발생할수 있음 ***Heap Overflow , Stack Overflow***

-스택영역이 커지면 힙영역이 줄어듬 반대 상황도 가능함

# 메모리 단편화
RAM에서 메모리 공간이 작은 조각으로 나뉘어져 사용가능한 메모리가 충분히 존재하지만 할당이 불가능한 상태

- 내부 단편화
    - 메모리를 할당할 때 프로세스가 필요한 양보다 더 큰 메모리가 할당되어서 공간이 낭비되는 상황

-외부 단편화
    - 할당되고 해제되는 과정에서 작은 메모리가 중간중간 존재하게되어 충분한 공간이 있어도 쪼개어져 존재하기 때문에 실제로는 할당을 못하는 상황

## 해결 방법
1. 페이징 기법
    - 프레임을 페이지에 옮겨놓고 필요한 메모리를 페이지크기로 가져다가 사용하는 방법
        - 페이지 : 가상메모리를 같은 크기의 블록으로 나눈 것
        - 프레임 : 메인메모리를 페이지와 같은 크기로 나눈 것
    - 내부 단편화가 발생 가능
2. 세스멘테이션 기법
    - 가상 메모리를 서로 크기가 다른 노리적 단위인 세그멘트로 분할
    , 메모리를 할당하여 실제 메모리 주소로 변환하게하는 방법
        - 세그먼트들은 연속적인 공간에 할당
        - 그때 그때 빈공간을 찾아서 할당
    - 여전히 외부 단편화가 발생
3. 메모리 풀
    - 미리 고정되어있는 공간을 할당해서 필요할 때마다 그 공간에 할당하고 해제하여 메모리 단편화를 줄임
4. 압축
    - 메모리에서 할당된 메모리를 재배치해서 분산되어있는 여유공간을 확보

# 메모리 풀
고정 된 크기의 블록을 할당하여 malloc이나 new 연산자와 유사한 메모리 동적 할당을 가능하게 해주는 기술

- malloc이나new연산자 같은 기능들은 다양한 블록사이즈 때문에 단편화를 유발 시키고 파편화된 메모리들은 퍼포먼스 때문에 실시간 시스템에서는 사용을 못함

- 메모리 할당을 하면 OS에서 시스템 콜을 통해서 메모리를 할당하게 되는데 미리 할당되어있기 때문에 시스템 콜이 발생하지않아서 성능 향상에 도움이 됨

