# 좌표계 변환
컴퓨터 그래픽스에서 좌표계 변환은 객체나 장면을 서로다른 좌표계 사이에서 변환하는 과정

다양한 뷰포인트나 좌표계를 기반으로 객체를 렌더링하거나 객체간의 관계를 표현하기위해 필요

변환 과정으로는 모델좌표계 -> 월드 좌표계 -> 뷰 좌표계 -> 클립 좌표계 -> NDC 좌표계 -> 윈도우 좌표계등이 있습니다.

## 모델 좌표계
- 객체가 자신만의 로컬 좌표계를 가지고 있는 좌표계

## 월드 좌표계
- 모든 객체가 공통의 기준점을 가지고 있는 좌표계
- 모델 좌표계로 변환하기 위해서 객체를 이동 ,회전,크기조절 순으로 연산을 진행
- M_world = T R S

## 뷰좌표계
- 카메라의 위치를 원점으로 하여 카메라의 방향을 기준으로 하는 좌표계

뷰 변환
월드 좌표계를 카메라 좌표계로 변환하는 과정으로 카메라가 위치한 장소와 방향을 기준으로 3D모델을 재배치하는 작업

뷰행렬
- 카메라의 위치 : C
- 카메라의 타겟 : T
- 카메라의 업 벡터 : U

1. 카메라의 z축 방향 벡터를 계산
- 타겟에서 카메라 위치를 빼고 노멀라이즈
$$
z= \frac{C-T}{||C-T||}
$$

2. 카메라의 x축 방향 벡터 x를 계산
- 업벡터와 z축방향의 벡터의 외적

$$
x=\frac{U \times z}{||U \times z||}
$$
3. 카메라의 y축 방향 벡터 y를 계산
- z축 방향벡터와 x축 방향 벡터의 외적
$$
y= z \times x
$$

이렇게 구한 xyz를 이용해서 행렬을 구성

$$
V = \begin{pmatrix}
x_x& x_y& x_z&  -(x \cdot C)
\\ y_x & y_y & y_z &  -(y \cdot C)
\\ z_x& z_y& z_z& -(y \cdot C)
\\0& 0& 0& 1
\end{pmatrix}
$$


## 클립 좌표계
- 뷰 좌표계를 클립 좌표계로 변환하여 객체를 투영하는 단계
- 원근 투영이나 직교 투영을 적용하여 3D공간을 2D평면에 투영함
- Projection Matrix

## NDC 좌표계 ( 정규 장치 좌표계 )
- 클립 좌표계를 정규화하여 -1에서 1사이 값으로 변환한 좌표계
- 클립 좌표계의 좌표를 w분할을 통해 NDC좌표로 변환

## 윈도우 좌표계
- NDC좌표계를 실제 화면 좌표계로 변환
- 이는 화면의 해상도와 뷰포트 설정에 따라 NDC좌표를 화면 좌표로 매핑하는 과정